<!--pages/edit/edit.wxml-->
<view class="container">
  <!-- 预览区域 -->
  <view class="preview-section">
    <view class="canvas-container">
      <image
        class="photo-image"
        src="{{currentImageUrl}}"
        mode="aspectFit"
        bindtap="previewImage"
      ></image>
    </view>
  </view>

  <!-- 背景色选择 -->
  <view class="section card">
    <text class="section-title">背景颜色</text>
    <view class="color-list">
      <view
        class="color-item {{selectedColor === '#4A90E2' ? 'active' : ''}}"
        style="background: #4A90E2;"
        bindtap="selectColor"
        data-color="#4A90E2"
      >
        <text class="color-name">蓝色</text>
      </view>
      <view
        class="color-item {{selectedColor === '#FFFFFF' ? 'active' : ''}}"
        style="background: #FFFFFF;"
        bindtap="selectColor"
        data-color="#FFFFFF"
      >
        <text class="color-name">白色</text>
      </view>
      <view
        class="color-item {{selectedColor === '#FF6B6B' ? 'active' : ''}}"
        style="background: #FF6B6B;"
        bindtap="selectColor"
        data-color="#FF6B6B"
      >
        <text class="color-name">红色</text>
      </view>
      <view
        class="color-item {{selectedColor === '#E0E0E0' ? 'active' : ''}}"
        style="background: #E0E0E0;"
        bindtap="selectColor"
        data-color="#E0E0E0"
      >
        <text class="color-name">灰色</text>
      </view>
    </view>
  </view>

  <!-- 功能按钮 -->
  <view class="action-buttons">
    <button class="btn btn-secondary" bindtap="changeBackground" disabled="{{loading}}">
      <text>{{loading ? '处理中...' : '更换背景色'}}</text>
    </button>
    <button class="btn btn-primary" bindtap="generateLayout" disabled="{{loading}}">
      <text>{{loading ? '生成中...' : '生成排版照'}}</text>
    </button>
  </view>

  <!-- 底部操作 -->
  <view class="bottom-actions">
    <button class="btn btn-outline" bindtap="reupload">
      <text>重新上传</text>
    </button>
    <button class="btn btn-primary" bindtap="saveCurrent">
      <text>保存当前</text>
    </button>
  </view>
</view>
